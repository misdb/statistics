# 2-4. Relative Position of Data

## 1. Percentiles and Quartiles

> _Given an observed value x in a data set, x is the_ **Pth percentile** _of the data if the percentage of the data that are less than or equal to x is P. The number P is the_ **percentile rank** _of x._

**Example 12\)** Example 3\)의 데이터 세트에 대하여 1.39의 percentile을 구하라. 3.33의 percentile도 구하라.

**\[Solution\]**

{% tabs %}
{% tab title="R Code" %}
```text
x <- c(1.90, 3.00, 2.53, 3.71, 2.12, 1.76, 2.71, 1.39, 4.00, 3.33)

length(x[x <= 1.39]) / length(x) * 100
length(x[x <= 3.33]) / length(x) * 100
```
{% endtab %}

{% tab title="Result 1" %}
```text
> length(x[x <= 1.39]) / length(x) * 100
## [1] 10
```
{% endtab %}

{% tab title="Result 2" %}
```text
> length(x[x <= 3.33]) / length(x) * 100
## [1] 80
```
{% endtab %}
{% endtabs %}



 The _P_th percentile cuts the data set in two so that approximately _P_% of the data lie below it and \(100−P\)\(100−P\)% of the data lie above it. In particular, the three percentiles that cut the data into fourths, as shown in Figure "Data Division by Quartiles", are called the quartiles. The following simple computational definition of the three quartiles works well in practice.

\[ Data Division by Quartiles\]

![Data Division by Quartiles](../.gitbook/assets/20191011_102919.png)

> For any data set: 
>
> 1. The **second quartile** Q2 of the data set is its median.  
> 2.  Define two subsets:  
>
> * the **lower set**: all observations that are strictly less than Q2;  
> *  the **upper set**: all observations that are strictly greater than Q2. 
>
>      3. The **first quartile** Q1 of the data set is the median of the lower set.

**Example 13\)** 앞의 예에 있는 데이터 세트의 quartiles를 구하라.

**\[Solution\]**

{% tabs %}
{% tab title="R Code" %}
```text
x <- c(1.90, 3.00, 2.53, 3.71, 2.12, 1.76, 2.71, 1.39, 4.00, 3.33)
y <- quantile(x)
y                # quartiles of x
y[3]             # second quartile of x
sort(x[x<y[3]])  # lower subset
sort(x[x>y[3]])  # upper subset
```
{% endtab %}

{% tab title="quartiles" %}
```text
> y
##     0%    25%    50%    75%   100% 
## 1.3900 1.9550 2.6200 3.2475 4.0000 
```
{% endtab %}

{% tab title="lower subset" %}
```text
> sort(x[x<y[3]])  # lower subset
## [1] 1.39 1.76 1.90 2.12 2.53
```
{% endtab %}

{% tab title="upper subset" %}
```text
> sort(x[x>y[3]])  # upper subset
## [1] 2.71 3.00 3.33 3.71 4.00
```
{% endtab %}
{% endtabs %}

**Example 14\)** 앞의 데이터 세트에 3.88을 추가하고 quartiles를 구하라.

**\[Solution\]**

{% tabs %}
{% tab title="R Code" %}
```text
x <- c(1.90, 3.00, 2.53, 3.71, 2.12, 1.76, 2.71, 1.39, 4.00, 3.33, 3.88)
y <- quantile(x)
y                # quartiles of x
y[3]             # second quartile of x
sort(x[x<y[3]])  # lower subset
sort(x[x>y[3]])  # upper subset
```
{% endtab %}

{% tab title="quartiles" %}
```text
> y
##   0%  25%  50%  75% 100% 
## 1.39 2.01 2.71 3.52 4.00 
```
{% endtab %}

{% tab title="lower subset" %}
```text
> sort(x[x<y[3]])  # lower subset
## [1] 1.39 1.76 1.90 2.12 2.53
```
{% endtab %}

{% tab title="upper subset" %}
```text
> sort(x[x>y[3]])  # upper subset
## [1] 3.00 3.33 3.71 3.88 4.00
```
{% endtab %}
{% endtabs %}

* **five-number summary** of the data set:

```text
{xmin, Q1, Q2, Q3, xmax}
```

* The five-number summary is used to construct a **box plot.**

![](../.gitbook/assets/20191011_105716.png)

## 2. IQR

> **The interquartile range \(IQR\)** is the quantity :  
>
>                                                        $$    IQR = Q3−Q1 $$



**EXAMPLE 15\)** Example 13\)의 Box Plot을 작성하라. 그리고 IQR을를 구하라.

**\[Solution\]**

{% tabs %}
{% tab title="R Code" %}
```text
x <- c(1.90, 3.00, 2.53, 3.71, 2.12, 1.76, 2.71, 1.39, 4.00, 3.33)
boxplot(x)
quantile(x)
IQR(x)
```
{% endtab %}

{% tab title="Box Plot" %}
![](../.gitbook/assets/image%20%2848%29.png)
{% endtab %}

{% tab title="IQR" %}
```text
> quantile(x)
##     0%    25%    50%    75%   100% 
## 1.3900 1.9550 2.6200 3.2475 4.0000 
> IQR(x)
## [1] 1.2925
```
{% endtab %}
{% endtabs %}

> The **z-score** of an observation x is the number of z given by the computational formula   
>
>                          $$z =  (x - x^-)  /  {\delta} $$      or       $$z = (x - \mu) / \sigma$$     
>
>  according to whether the data set is a sample or is the entire population.



![x-scale vs z-score](../.gitbook/assets/image%20%2826%29.png)

**Example 16\)** 다음과 같은 10명의 학생의 평균 평점에 대하여 z-score를 구하라.

```text
1.90 3.00 2.53 3.71 2.12 1.76 2.71 1.39 4.00 3.33
```

**\[Solution\]**

{% tabs %}
{% tab title="R Code" %}
```text
x <- c(1.90, 3.00, 2.53, 3.71, 2.12, 1.76, 2.71, 1.39, 4.00, 3.33)
z_score <- (x - mean(x)) / sd(x)
round(z_score, 2)
```
{% endtab %}

{% tab title="z-score" %}
```text
> round(z_score, 2)
##  [1] -0.86  0.41 -0.13  1.23 -0.61 -1.02  0.07 -1.45  1.56  0.79
```
{% endtab %}
{% endtabs %}

**Example 17\)** 최근에 등록했던 학생들 평균 평점의 평균과 표준편차가 각각 $$\mu = 2.70$$과 $$\sigma = 0.50$$ 이었다. Antonio와 Beatrice 두 학생의 z-score는 각각 -0.62와 1.28이었다. 그들의 평균 평점은 몇 점인가?

**\[Solution\]**

{% tabs %}
{% tab title="R Code" %}
```text
mean <- 2.70
std <- 0.50
z_score <- c(-0.62, 1.28)
GPA <- mean + std * z_score
```
{% endtab %}

{% tab title="z-score" %}
```text
> GPA <- mean + std * z_score; GPA
## [1] 2.39 3.34
```
{% endtab %}
{% endtabs %}

### 

